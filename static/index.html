<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SFDL-Medialoader - Dashboard</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="js/status.js"></script>
	<style>
		@keyframes pulse-glow {
			0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.3); }
			50% { box-shadow: 0 0 40px rgba(16, 185, 129, 0.6); }
		}
		.loader-active {
			animation: pulse-glow 2s ease-in-out infinite;
		}
		@keyframes slideIn {
			from { transform: translateY(-20px); opacity: 0; }
			to { transform: translateY(0); opacity: 1; }
		}
		.slide-in {
			animation: slideIn 0.5s ease-out;
		}
	</style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-screen text-gray-100">
	<!-- Navigation Bar -->
	<nav class="bg-gray-800/50 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-50">
		<div class="container mx-auto px-4 py-4">
			<div class="flex items-center justify-between">
				<div class="flex items-center space-x-3">
					<div class="w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg flex items-center justify-center">
						<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
						</svg>
					</div>
					<div>
						<h1 class="text-xl font-bold text-white title">SFDL-Medialoader</h1>
						<p class="text-xs text-gray-400">Dashboard</p>
					</div>
				</div>
				<div class="flex items-center space-x-2">
					<button onclick="openUploadModal()" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-blue-500/50">
						<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
						</svg>
						Upload SFDL
					</button>
					<button id="startLoader" onclick="startLoader()" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-green-500/50">
						<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
						</svg>
						Loader starten
					</button>
					<button id="shutdownServer" onclick="shutdownServer()" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-red-500/50">
						<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
						</svg>
						Server stoppen
					</button>
				</div>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<div class="container mx-auto px-4 py-8">
		<!-- Status Info Card -->
		<div class="bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-700 p-6 mb-8 slide-in">
			<div class="flex items-center justify-between flex-wrap gap-4">
				<div class="flex items-center space-x-4">
					<div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
					<div class="info text-gray-300">Status: <span class="font-semibold text-white">Loading...</span></div>
				</div>
			</div>
		</div>

		<!-- SFDL Files Section -->
		<div class="bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-700 overflow-hidden mt-8 hidden" id="sfdlFilesSection">
			<div class="bg-gradient-to-r from-gray-700 to-gray-600 px-6 py-4 border-b border-gray-700">
				<div class="flex items-center justify-between">
					<h2 class="text-lg font-semibold text-white flex items-center">
						<svg class="w-5 h-5 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
						</svg>
						SFDL Dateien
					</h2>
					<button onclick="loadSFDLFiles()" class="text-sm text-blue-400 hover:text-blue-300 transition-colors">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
						</svg>
					</button>
				</div>
			</div>
			<div class="p-6" id="sfdlFilesList">
				<!-- Files will be loaded here by JavaScript -->
			</div>
		</div>

		<!-- Loader Section -->
		<div class="loader bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-2xl border border-gray-700 overflow-hidden hidden mt-4" id="loaderSection">
			<!-- Loader Header -->
			<div class="loader_head bg-gradient-to-r from-gray-700 to-gray-600 px-6 py-4 border-b border-gray-700">
				<h2 class="text-lg font-semibold text-white">Download Status</h2>
			</div>

			<!-- Progress Bar -->
			<div class="loader_progress p-6">
				<div class="space-y-4">
					<div class="flex justify-between text-sm text-gray-400">
						<span>Fortschritt</span>
						<span class="progress-percent">0%</span>
					</div>
					<div class="w-full bg-gray-700 rounded-full h-4 overflow-hidden shadow-inner">
						<div class="progress-bar h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500 ease-out rounded-full" style="width: 0%"></div>
					</div>
					<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
						<div class="bg-gray-700/50 rounded-lg p-3 text-center">
							<div class="text-2xl font-bold text-green-400 download-size">0 MB</div>
							<div class="text-xs text-gray-400 mt-1">Geladen</div>
						</div>
						<div class="bg-gray-700/50 rounded-lg p-3 text-center">
							<div class="text-2xl font-bold text-blue-400 download-speed">0 MB/s</div>
							<div class="text-xs text-gray-400 mt-1">Geschwindigkeit</div>
						</div>
						<div class="bg-gray-700/50 rounded-lg p-3 text-center">
							<div class="text-2xl font-bold text-purple-400 download-time">00:00:00</div>
							<div class="text-xs text-gray-400 mt-1">Verstrichene Zeit</div>
						</div>
						<div class="bg-gray-700/50 rounded-lg p-3 text-center">
							<div class="text-2xl font-bold text-yellow-400 download-eta">00:00:00</div>
							<div class="text-xs text-gray-400 mt-1">Verbleibend (ETA)</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Files List -->
			<div class="loader_files px-6 py-4 bg-gray-900/30">
				<h3 class="text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wide">Dateien</h3>
				<div class="space-y-4 max-h-96 overflow-y-auto files-container">
					<!-- Files will be inserted here by JavaScript -->
				</div>
			</div>
		</div>
	</div>

	<!-- Upload Modal -->
	<div id="uploadModal" class="hidden fixed inset-0 z-50 overflow-y-auto">
		<!-- Backdrop -->
		<div class="fixed inset-0 bg-black bg-opacity-75 transition-opacity" onclick="closeUploadModal()"></div>
		
		<!-- Modal Content -->
		<div class="flex items-center justify-center min-h-screen p-4">
			<div class="relative bg-gray-800 rounded-xl shadow-2xl border border-gray-700 max-w-3xl w-full" onclick="event.stopPropagation()">
				<!-- Header -->
				<div class="flex items-center justify-between bg-gradient-to-r from-gray-700 to-gray-600 px-6 py-4 rounded-t-xl border-b border-gray-700">
					<h2 class="text-xl font-bold text-white flex items-center">
						<svg class="w-6 h-6 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
						</svg>
						SFDL Upload
					</h2>
					<button onclick="closeUploadModal()" class="text-gray-400 hover:text-white transition-colors">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
						</svg>
					</button>
				</div>

				<!-- Tabs -->
				<div class="flex border-b border-gray-700">
					<button class="modal-tab-button flex-1 px-4 py-3 text-center font-medium transition-all duration-200 bg-gradient-to-r from-gray-700 to-gray-600 text-white border-b-2 border-purple-500" onclick="switchModalTab('url')">
						<div class="flex items-center justify-center space-x-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
							</svg>
							<span>URL Download</span>
						</div>
					</button>
					<button class="modal-tab-button flex-1 px-4 py-3 text-center font-medium transition-all duration-200 bg-gray-800/50 text-gray-400 hover:bg-gray-700/50" onclick="switchModalTab('file')">
						<div class="flex items-center justify-center space-x-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
							</svg>
							<span>Datei Upload</span>
						</div>
					</button>
					<button class="modal-tab-button flex-1 px-4 py-3 text-center font-medium transition-all duration-200 bg-gray-800/50 text-gray-400 hover:bg-gray-700/50" onclick="switchModalTab('text')">
						<div class="flex items-center justify-center space-x-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
							</svg>
							<span>Text Eingabe</span>
						</div>
					</button>
				</div>

				<!-- Tab Contents -->
				<div class="p-6">
					<!-- URL Download Tab -->
					<div id="modal-url-tab" class="modal-tab-content">
						<div class="space-y-4">
							<div>
								<label class="block text-sm font-medium text-gray-300 mb-2">SFDL URL</label>
								<input type="text" id="modal-sfdl-url" placeholder="https://download.sfdl.net/enc/..." class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
								<p class="mt-2 text-xs text-gray-400">Format: https://download.sfdl.net/enc/ID;Name;hash.ext</p>
							</div>
							<button onclick="uploadFromUrl()" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg flex items-center justify-center space-x-2">
								<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
								</svg>
								<span id="modal-url-button-text">SFDL herunterladen</span>
							</button>
						</div>
					</div>

					<!-- File Upload Tab -->
					<div id="modal-file-tab" class="modal-tab-content hidden">
						<div class="space-y-4">
							<div class="border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-blue-500 transition-colors cursor-pointer" id="modal-drop-zone">
								<svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
								</svg>
								<p class="text-gray-300 mb-2">Datei hierher ziehen oder klicken zum Ausw√§hlen</p>
								<p class="text-sm text-gray-400">Nur .sfdl Dateien werden akzeptiert</p>
								<input type="file" id="modal-file-input" accept=".sfdl" class="hidden">
							</div>
							<div id="modal-file-info" class="hidden bg-gray-700/50 rounded-lg p-4">
								<div class="flex items-center justify-between">
									<div class="flex items-center space-x-3">
										<svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
										</svg>
										<div>
											<div class="text-white font-medium" id="modal-selected-filename"></div>
											<div class="text-sm text-gray-400" id="modal-selected-filesize"></div>
										</div>
									</div>
									<button onclick="clearModalFileSelection()" class="text-red-400 hover:text-red-300">
										<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
										</svg>
									</button>
								</div>
							</div>
							<button onclick="uploadModalFile()" id="modal-upload-button" class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2" disabled>
								<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
								</svg>
								<span id="modal-file-button-text">Hochladen</span>
							</button>
						</div>
					</div>

					<!-- Text Input Tab -->
					<div id="modal-text-tab" class="modal-tab-content hidden">
						<div class="space-y-4">
							<div>
								<label class="block text-sm font-medium text-gray-300 mb-2">SFDL Dateiname</label>
								<input type="text" id="modal-text-filename" placeholder="download.sfdl" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-300 mb-2">SFDL Inhalt</label>
								<textarea id="modal-text-content" rows="10" placeholder="<?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>..." class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all font-mono text-sm"></textarea>
							</div>
							<button onclick="uploadModalText()" class="w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg flex items-center justify-center space-x-2">
								<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
								</svg>
								<span id="modal-text-button-text">Speichern</span>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="js/upload-modal.js"></script>
</body>
</html>